import"./main-BNS_gsVg.js";import{W,P as z,O as k,g as E,C as O,S as j,a as D,I as U,M as C,c as P,G as Y,d as J,e as K,L as B,B as G,F as b,f as R,H as N,V as Q}from"./getStarfield-DRpFtjll.js";const L=document.querySelector("#c"),A=document.querySelector("#mainView"),X=document.querySelector("#observerView"),l=new W({antialias:!0,canvas:L}),m=new z(75,2,.1,1e3);m.position.z=5;const H=new k(m,A);H.target.set(0,0,0);H.update();const v=new E({container:document.getElementById("gui")}),p={showCameraHelper:!1,sphereRotationSpeed:1600,particleSpeed:100};v.add(p,"showCameraHelper").name("Show observer camera");v.add(p,"sphereRotationSpeed",100,5e3).name("Rotation speed");v.add(p,"particleSpeed",10,1e3).name("Wind speed");const r=new z(100,2,.1,1e3);r.position.z=1.2;r.position.y=-.22;r.lookAt(0,5,0);const M=new O(r);M.material.opacity=0;const i=new j;i.background=new D("black");i.add(M);const Z=new U(1,8),_=new C({color:6118749,wireframe:!0}),$=new P(Z,_),u=new Y;u.add($);u.add(r);i.add(u);function ee(){u.rotation.z+=p.sphereRotationSpeed/1e5}const te=J();i.add(te);const oe=new K(.05,16,16),ne=new C({color:13369344}),a=new P(oe,ne);let c=90;const g=V(c,0,1);console.log(g);a.position.set(g.x,g.y,g.z);i.add(a);function ie(){c+=Math.PI/180*(p.particleSpeed/10),c=c%360;const t=V(c,0,1);console.log(c),console.log(t),a.position.set(t.x,t.y,t.z)}function V(t,e,o){const s=t*(Math.PI/180),n=e*(Math.PI/180),w=o*Math.cos(s)*Math.sin(n),y=o*Math.sin(s),h=o*Math.cos(s)*Math.cos(n);return new Q(w,y,h)}const se=new B({color:13369344}),I=new G;I.setAttribute("position",new b([],3));const d=new R(I,se);u.add(d);const re=500;function ae(){const e=[...d.geometry.getAttribute("position").array];e.length>3*re&&(e.shift(),e.shift(),e.shift());const o=d.worldToLocal(a.position.clone());e.push(o.x,o.y,o.z),d.geometry.setAttribute("position",new b(e,3)),d.geometry.computeBoundingSphere()}const ce=new B({color:52224}),q=new G;q.setAttribute("position",new b([],3));const f=new R(q,ce);i.add(f);const le=300;function pe(){const e=[...f.geometry.getAttribute("position").array];e.length>3*le&&(e.shift(),e.shift(),e.shift()),e.push(a.position.x,a.position.y,a.position.z),f.geometry.setAttribute("position",new b(e,3)),f.geometry.computeBoundingSphere()}const he=new N(16777147,526368,1);i.add(he);function F(){de(),requestAnimationFrame(F),ee(),ie(),ae(),pe()}F();function de(){me(l),l.setScissorTest(!0);{const t=T(A);m.aspect=t,m.updateProjectionMatrix(),M.visible=p.showCameraHelper,l.render(i,m)}{const t=T(X);r.aspect=t,r.updateProjectionMatrix(),M.visible=!1,l.render(i,r)}}function me(t){const e=t.domElement,o=e.clientWidth,s=e.clientHeight,n=e.width!==o||e.height!==s;return n&&t.setSize(o,s,!1),n}function T(t){const e=L.getBoundingClientRect(),o=t.getBoundingClientRect(),s=Math.min(o.right,e.right)-e.left,n=Math.max(0,o.left-e.left),w=Math.min(o.bottom,e.bottom)-e.top,y=Math.max(0,o.top-e.top),h=Math.min(e.width,s-n),S=Math.min(e.height,w-y),x=e.height-w;return l.setScissor(n,x,h,S),l.setViewport(n,x,h,S),h/S}
