import"./main-BNS_gsVg.js";import{W as O,T as D,P as G,O as U,g as Y,C as J,S as K,a as N,I as Q,M as T,c as B,G as L,d as X,e as Z,L as R,B as A,F as y,f as E,H as _,V as $}from"./getStarfield-DhCNcS4d.js";const H=document.querySelector("#c"),I=document.querySelector("#mainView"),ee=document.querySelector("#observerView"),l=new O({antialias:!0,canvas:H}),te=new D,u=new G(75,2,.1,1e3);u.position.z=5;const V=new U(u,I);V.target.set(0,0,0);V.update();const S=new Y({container:document.getElementById("gui")}),i={showCameraHelper:!1,sphereRotationSpeed:1600,particleSpeed:100,showEarth:!1};S.add(i,"showCameraHelper").name("Show observer camera");S.add(i,"sphereRotationSpeed",100,5e3).name("Rotation speed");S.add(i,"particleSpeed",10,1e3).name("Wind speed");S.add(i,"showEarth").name("Show earth");const r=new G(100,2,.1,1e3);r.position.z=1.2;r.position.y=-.22;r.lookAt(0,5,0);const b=new J(r);b.material.opacity=0;const s=new K;s.background=new N("black");s.add(b);const oe=new Q(1,8),ne=new T({color:6118749,wireframe:!0}),ie=te.load("../textures/earthmap1k.jpg"),k=new T({map:ie}),d=new B(oe,k),w=new L,P=new L;P.add(d);P.rotation.x=90*Math.PI/180;w.add(P);w.add(r);s.add(w);function se(){w.rotation.z+=i.sphereRotationSpeed/1e5,i.showEarth&&d.material.wireframe&&(d.material=k),!i.showEarth&&!d.material.wireframe&&(d.material=ne)}const ae=X();s.add(ae);const re=new Z(.05,16,16),ce=new T({color:13369344}),c=new B(re,ce);let h=0;const g=q(h,0,1);console.log(g);c.position.set(g.x,g.y,g.z);s.add(c);function he(){h-=Math.PI/180*(i.particleSpeed/10),h=h%360;const t=q(h,0,1);console.log(h),console.log(t),c.position.set(t.x,t.y,t.z)}function q(t,e,o){const a=t*(Math.PI/180),n=e*(Math.PI/180),f=o*Math.cos(a)*Math.sin(n),x=o*Math.sin(a),p=o*Math.cos(a)*Math.cos(n);return new $(f,x,p)}const le=new R({color:13369344}),F=new A;F.setAttribute("position",new y([],3));const m=new E(F,le);w.add(m);const pe=500;function de(){const e=[...m.geometry.getAttribute("position").array];e.length>3*pe&&(e.shift(),e.shift(),e.shift());const o=m.worldToLocal(c.position.clone());e.push(o.x,o.y,o.z),m.geometry.setAttribute("position",new y(e,3)),m.geometry.computeBoundingSphere()}const me=new R({color:52224}),W=new A;W.setAttribute("position",new y([],3));const M=new E(W,me);s.add(M);const ue=300;function we(){const e=[...M.geometry.getAttribute("position").array];e.length>3*ue&&(e.shift(),e.shift(),e.shift()),e.push(c.position.x,c.position.y,c.position.z),M.geometry.setAttribute("position",new y(e,3)),M.geometry.computeBoundingSphere()}const fe=new _(16777147,526368,1);s.add(fe);function j(){ge(),requestAnimationFrame(j),se(),he(),de(),we()}j();function ge(){Me(l),l.setScissorTest(!0);{const t=C(I);u.aspect=t,u.updateProjectionMatrix(),b.visible=i.showCameraHelper,l.render(s,u)}{const t=C(ee);r.aspect=t,r.updateProjectionMatrix(),b.visible=!1,l.render(s,r)}}function Me(t){const e=t.domElement,o=e.clientWidth,a=e.clientHeight,n=e.width!==o||e.height!==a;return n&&t.setSize(o,a,!1),n}function C(t){const e=H.getBoundingClientRect(),o=t.getBoundingClientRect(),a=Math.min(o.right,e.right)-e.left,n=Math.max(0,o.left-e.left),f=Math.min(o.bottom,e.bottom)-e.top,x=Math.max(0,o.top-e.top),p=Math.min(e.width,a-n),v=Math.min(e.height,f-x),z=e.height-f;return l.setScissor(n,z,p,v),l.setViewport(n,z,p,v),p/v}
