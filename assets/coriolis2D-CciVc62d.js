import"./main-BNS_gsVg.js";import{W as q,P as T,O as F,g as k,C as E,S as O,a as j,b as I,M as x,c as C,G as D,d as U,e as Y,L as B,B as G,F as g,f as R,H as J}from"./getStarfield-DRpFtjll.js";const z=document.querySelector("#c"),A=document.querySelector("#mainView"),K=document.querySelector("#observerView"),a=new q({antialias:!0,canvas:z}),d=new T(75,2,.1,1e3);d.position.z=5;const L=new F(d,A);L.target.set(0,0,0);L.update();const y=new k({container:document.getElementById("gui")}),c={showCameraHelper:!1,circleRotationSpeed:1600,particleSpeed:100};y.add(c,"showCameraHelper").name("Show observer camera");y.add(c,"circleRotationSpeed",100,5e3).name("Rotation speed");y.add(c,"particleSpeed",10,1e3).name("Wind speed");const n=new T(100,2,.1,1e3);n.position.z=.2;n.position.y=-.22;n.lookAt(0,5,0);const w=new E(n);w.material.opacity=0;const i=new O;i.background=new j("black");i.add(w);const N=new I(1,32),Q=new x({color:6118749,wireframe:!0}),X=new C(N,Q),p=new D;p.add(X);p.add(n);i.add(p);function Z(){p.rotation.z+=c.circleRotationSpeed/1e5}const _=U();i.add(_);const $=new Y(.05,16,16),ee=new x({color:13369344}),s=new C($,ee);s.position.set(0,0,0);i.add(s);let m=0;function te(){m+=Math.PI/180*(c.particleSpeed/1e3),m=m%360,s.position.y=Math.sin(m)}const oe=new B({color:13369344}),H=new G;H.setAttribute("position",new g([],3));const l=new R(H,oe);p.add(l);const ie=500;function ne(){const e=[...l.geometry.getAttribute("position").array];e.length>3*ie&&(e.shift(),e.shift(),e.shift());const t=l.worldToLocal(s.position.clone());e.push(t.x,t.y,t.z),l.geometry.setAttribute("position",new g(e,3)),l.geometry.computeBoundingSphere()}const se=new B({color:52224}),P=new G;P.setAttribute("position",new g([],3));const u=new R(P,se);i.add(u);const re=300;function ae(){const e=[...u.geometry.getAttribute("position").array];e.length>3*re&&(e.shift(),e.shift(),e.shift()),e.push(s.position.x,s.position.y,s.position.z),u.geometry.setAttribute("position",new g(e,3)),u.geometry.computeBoundingSphere()}const ce=new J(16777147,526368,1);i.add(ce);function W(){le(),requestAnimationFrame(W),Z(),te(),ne(),ae()}W();function le(){de(a),a.setScissorTest(!0);{const o=v(A);d.aspect=o,d.updateProjectionMatrix(),w.visible=c.showCameraHelper,a.render(i,d)}{const o=v(K);n.aspect=o,n.updateProjectionMatrix(),w.visible=!1,a.render(i,n)}}function de(o){const e=o.domElement,t=e.clientWidth,h=e.clientHeight,r=e.width!==t||e.height!==h;return r&&o.setSize(t,h,!1),r}function v(o){const e=z.getBoundingClientRect(),t=o.getBoundingClientRect(),h=Math.min(t.right,e.right)-e.left,r=Math.max(0,t.left-e.left),M=Math.min(t.bottom,e.bottom)-e.top,V=Math.max(0,t.top-e.top),f=Math.min(e.width,h-r),b=Math.min(e.height,M-V),S=e.height-M;return a.setScissor(r,S,f,b),a.setViewport(r,S,f,b),f/b}
